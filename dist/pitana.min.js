var pitana={};!function(){"use strict";var a=function(b){var c,d=function(){"function"==typeof b.initialize&&b.initialize.apply(this,arguments)};c=void 0!==this&&this.extend===a?this:Object,d.prototype=Object.create(c.prototype),d.prototype.constructor=d;for(var e in b)b.hasOwnProperty(e)===!0&&(d.prototype[e]=b[e]);return d.extend=a,d.parent=c,d["super"]=c.prototype,d};pitana.klass=a}(),pitana.Base=pitana.klass({}),function(){"use strict";pitana.settings={preStart:function(){},preEnd:function(){},postTemplateProcessing:function(a){return a},debug:!1,isConsoleAvailable:!1}}(),function(){"use strict";pitana.util={log:function(){pitana.settings.debug===!0&&pitana.settings.isConsoleAvailable===!0&&console.log.apply(console,arguments)},logError:function(){pitana.settings.debug===!0&&pitana.settings.isConsoleAvailable===!0&&console.error.apply(console,arguments)},"for":function(a,b){for(var c in a)a.hasOwnProperty(c)===!0&&b(a[c],c)},addProperty:function(a,b,c,d){var e;Object.defineProperty(a,b,{enumerable:!0,configurable:!0,get:function(){return c(e),e},set:function(a){e=a,d(e)}})}}}(),function(){"use strict";var a=pitana.util.log;pitana.EventBus=pitana.Base.extend({initialize:function(){pitana.Base.apply(this,arguments),this._NewsPaperList={},this._OrderList=[]},on:function(){return this.subscribe.apply(this,arguments)},subscribe:function(b,c){if(a("subscribed ",b),"string"!=typeof b||"function"!=typeof c)return-1;var d=this._NewsPaperList[b];"object"!=typeof d&&(d=this._NewsPaperList[b]=[]);var e=d.push(c)-1;return this._OrderList.push({newsPaper:b,customer:e})-1},off:function(){return this.unsubscribe.apply(this,arguments)},unsubscribe:function(b){var c=this._OrderList[b];void 0!==c&&(a("unsubscribe ",c.newsPaper),delete this._NewsPaperList[c.newsPaper][c.customer])},trigger:function(){this.publish.apply(this,arguments)},publish:function(b){a.apply(null,arguments);var c=Array.prototype.slice.call(arguments),d=c.slice(0,1)[0];c.shift();var e=this._NewsPaperList[d];if("undefined"!=typeof e)for(var f=e.length,g=0;f>g;g++)"function"==typeof e[g]&&e[g].apply(this,c)}})}(),function(){"use strict";var a=Element.prototype;a.matchesSelector=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector,a.matches||(a.matches=a.matchesSelector),pitana.domEvents={addLiveEventListener:function(a,b,c,d,e){var f=function(a){var b=a.target;if(""===c)d.call(e,a,a.currentTarget,a.currentTarget.dataset);else for(;b!==a.currentTarget&&b!==document&&null!==b;){if(b.matches(c)===!0){d.call(e,a,b,b.dataset);break}b=b.parentNode}};return a.addEventListener(b,f,!1),f},trigger:function(a,b,c,d){void 0===d&&(d={});var e=document.createEvent("CustomEvent");e.initCustomEvent(b,d.bubbles!==!1,d.cancelable!==!1,c),a.dispatchEvent(e)}}}(),function(){"use strict";pitana.settings.GlobalEventBus=new pitana.EventBus,pitana.HTMLElement=pitana.Base.extend({initialize:function(a){if(pitana.Base.apply(this,arguments),this.$=a.ele,this.template instanceof HTMLTemplateElement)this.$.appendChild(document.importNode(this.template.content,!0));else if(void 0!==this.template&&null!==this.template){var b="";"string"==typeof this.template&&(b=this.template),"function"==typeof this.template&&(b=this.template()),this.$.innerHTML=pitana.settings.postTemplateProcessing(b)}this._viewMetadata={eventBus:pitana.settings.GlobalEventBus,topicList:{},eventsMap:{}};var c=this;void 0!==this.globalEvents&&pitana.util["for"](this.globalEvents,function(a,b){c.subscribeGlobalEvent(b,a)}),void 0!==this.events&&this.on(this.events),"function"==typeof pitana.settings.preStart&&pitana.settings.preStart.call(this)},_getEventBus:function(){return this._viewMetadata.eventBus},subscribeGlobalEvent:function(a,b){var c=this,d=function(){c[b].apply(c,arguments)};void 0===this._viewMetadata.topicList[a]&&(this._viewMetadata.topicList[a]=[]);var e=this._getEventBus();this._viewMetadata.topicList[a].push(e.subscribe(a,d))},unsubscribeGlobalEvent:function(a){var b=this._getEventBus();void 0!==this._viewMetadata.topicList[a]&&(this._viewMetadata.topicList[a].map(function(a,c){b.unsubscribe(a)}),delete this._viewMetadata.topicList[a])},publishGlobalEvent:function(a){var b=this._getEventBus();b.publish.apply(b,arguments)},on:function(a){var b=this;pitana.util["for"](a,function(a,c){c=c.trim().replace(/ +/g," ");var d=c.split(" "),e=d.shift(),f=d.join(" "),g=pitana.domEvents.addLiveEventListener(b.$,e,f,b[a],b);b._viewMetadata.eventsMap[c]={eventName:e,callback:g}})},off:function(a){var b=this._viewMetadata.eventsMap[a];void 0!==b&&"object"==typeof b&&(this.$.removeEventListener(b.eventName,b.callback),delete this._viewMetadata.eventsMap[a])},trigger:function(a,b){pitana.domEvents.trigger(this.$,a,b)},_endModule:function(){"function"==typeof pitana.settings.postEnd&&pitana.settings.postEnd.call(this);var a=this;pitana.util["for"](this._viewMetadata.eventsMap,function(b,c){a.off(c)}),this.$.innerHTML="",pitana.util["for"](this._viewMetadata.topicList,function(b,c){a.unsubscribeGlobalEvent(c)})}})}(),function(){"use strict";pitana.ObjectMap=pitana.Base.extend({initialize:function(){pitana.Base.apply(this,arguments),this.allNodes=[]},add:function(a,b){var c=a.__ELEMENT_TO_VIEW_INDEX__;if(void 0!==c)throw"Week map Error, object already mapped";this.allNodes.push({obj:a,val:b}),a.__ELEMENT_TO_VIEW_INDEX__=this.allNodes.length-1},get:function(a){var b=a.__ELEMENT_TO_VIEW_INDEX__;return void 0!==b?this.allNodes[b].val:void 0},set:function(a,b){var c=a.__ELEMENT_TO_VIEW_INDEX__;void 0!==c&&(this.allNodes[c].val=b)},remove:function(a){var b=a.__ELEMENT_TO_VIEW_INDEX__;void 0!==b&&(this.allNodes[b]=null,delete a.__ELEMENT_TO_VIEW_INDEX__)}})}(),function(){"use strict";var a={"true":!0,"false":!1,"null":!1,"":!0};pitana.accessorType={},pitana.accessorType.string={get:function(a,b){var c=this.getAttribute(a);return null!==c?c:b["default"]},set:function(a,b,c){this.setAttribute(a,b)}},pitana.accessorType["int"]={get:function(a,b){var c=this.getAttribute(a);return null!==c?parseInt(c,10):b["default"]},set:function(a,b,c){"number"==typeof b&&this[a]!==b+""&&this.setAttribute(a,b)}},pitana.accessorType["boolean"]={get:function(b,c){var d=a[this.getAttribute(b)];return void 0===d?!1:d},set:function(a,b,c){this[a]!==b&&"boolean"==typeof b&&(b===!0?this.setAttribute(a,""):this.removeAttribute(a))}},pitana.accessorType.readOnly={get:function(a,b){var c=pitana.nodeToViewMapping.get(this),d=c[b.get];return"function"==typeof d?d.apply(c,arguments):void 0},set:function(a,b,c){}},pitana.accessorType.json={get:function(a,b){if(void 0===this["_json_"+a+"_init_"]){var c=this.getAttribute(a);if(null===c)this["_json_"+a]=b["default"];else try{this["_json_"+a]=JSON.stringify(c)}catch(d){this["_json_"+a]={jsonParseError:!0}}this["_json_"+a+"_init_"]=!0}return this["_json_"+a]},set:function(a,b,c){var d=this[a];d!==b&&(this["_json_"+a]=b,this.setAttribute(a,JSON.stringify(b)))}}}(),function(){"use strict";pitana.nodeToViewMapping=new pitana.ObjectMap,pitana.register=function(a){void 0===a.initialize&&(a.initialize=function(){pitana.HTMLElement.apply(this,arguments)}),pitana.registerElement(pitana.HTMLElement.extend(a))},pitana.registerElement=function(a){var b=Object.create(HTMLElement.prototype);if(b.createdCallback=function(){var b=new a({ele:this});pitana.nodeToViewMapping.add(this,b),"function"==typeof b.createdCallback&&b.createdCallback.apply(b,arguments)},b.attachedCallback=function(){var a=pitana.nodeToViewMapping.get(this);"function"==typeof a.attachedCallback&&a.attachedCallback.apply(a,arguments)},b.detachedCallback=function(){var a=pitana.nodeToViewMapping.get(this);"function"==typeof a.detachedCallback&&a.detachedCallback.apply(a,arguments),a._endModule(),pitana.nodeToViewMapping.remove(this)},void 0!==a.prototype.methods&&(b._commonMethod=function(a,b){var c=pitana.nodeToViewMapping.get(this),d=c[a];"function"==typeof d&&d.apply(c,b)},a.prototype.methods.map(function(a,c){b[a]=function(){b._commonMethod.call(this,a,arguments)}})),b.attributeChangedCallback=function(a){var b=pitana.nodeToViewMapping.get(this),c=arguments;pitana.util["for"](b.accessors,function(d,e){e.toLowerCase()===a&&"string"==typeof d.onChange&&b[d.onChange].apply(b,c)}),"function"==typeof b.attributeChangedCallback&&b.attributeChangedCallback.apply(b,arguments)},void 0!==a.prototype.accessors&&pitana.util["for"](a.prototype.accessors,function(a,c){void 0===a.type&&(a.type="string");var d={};d[c]={get:function(){return void 0!==pitana.accessorType[a.type]&&"function"==typeof pitana.accessorType[a.type].get?pitana.accessorType[a.type].get.call(this,c,a):void 0},set:function(b){void 0!==pitana.accessorType[a.type]&&"function"==typeof pitana.accessorType[a.type].set&&pitana.accessorType[a.type].set.call(this,c,b,a)}},Object.defineProperties(b,d)}),"function"!=typeof document.registerElement)throw"document.registerElement not found, make sure you can included WebComponents Polyfill";var c=a.prototype.tagName.split("-").map(function(a){return a.charAt(0).toUpperCase()+a.slice(1)}).join("")+"Element";window[c]=document.registerElement(a.prototype.tagName,{prototype:b})}}();